{% extends 'layout.html' %}

{% block content %}
<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-bold">Latest Articles</h1>
  <form method="get" action="/" class="flex">
    <input name="q" value="{{ q }}" placeholder="Search" class="px-3 py-2 border rounded-l-md" />
    <button class="bg-gray-800 text-white px-3 rounded-r-md">Search</button>
  </form>
</div>

<div class="grid md:grid-cols-2 gap-6">
  {% for a in articles %}
    <article class="bg-white p-5 rounded shadow">
      <h2 class="text-xl font-semibold mb-2">{{ a.title }}</h2>
      <p class="text-sm text-gray-600 mb-3">By {{ a.author or 'Unknown' }} • {{ a.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
      <p class="text-gray-700 mb-4">{{ a.content[:200] }}{% if a.content|length > 200 %}...{% endif %}</p>
      <div class="flex gap-2">
        <a href="/article/{{ a.id }}" class="text-sm text-blue-600">View</a>
        <a href="/edit/{{ a.id }}" class="text-sm text-yellow-600">Edit</a>
        <form action="/delete/{{ a.id }}" method="post" onsubmit="return confirm('Delete this article?')">
          <button type="submit" class="text-sm text-red-600">Delete</button>
        </form>
      </div>
    </article>
  {% else %}
    <p>No articles yet — create the first one.</p>
  {% endfor %}
</div>

{% endblock %}
